:docinfo:
:toc:
:toc-title: Job Analytics User Guide
= Job Analytics
include::../common-settings.adoc[]
include::../all-doc-links.adoc[]

== Job Analytics Portal

The *ProActive Job Analytics* is a dashboard that provides an overview of executed workflows
along with their input variables and results.

It offers several functionalities, including:

- Advanced search by name, user, date, state, etc.
- Execution metrics summary about durations, encountered issues, etc.
- Charts to track variables and results evolution and correlation.
- Export data in multiple formats for further use in analytics tools.


The screenshot below shows an overview of the Job Analytics Portal.

[[_JA-overview]]
image::JA-overview.png[align=center]
Job Analytics is very useful to compare metrics and charts of workflows that have common variables and results. For example, a Machine Learning algorithm might take different variable values and produce multiple results. It would be interesting to analyze the correlation and evolution of algorithm results regarding the input variation (See also a similar example of link:../MLOS/MLOSUserGuide.html#_AutoML[AutoML]).
The following sections will show you some key features of the dashboard and how to use them for a better understanding of your job executions.

[[_job_search]]
=== Job Search

Job Analytics Portal includes a search window that allows users to search for jobs based on specific criteria (see screenshot below).
The job search panel allows to select multi-value filters for the following job parameters:

- _Workflow Name(s)_: Jobs can be filtered by workflow name. Selecting/Typing one or more workflow names is provided by a built-in `auto-complete` feature that helps you search for workflows or buckets from the link:../user/ProActiveUserGuide.html#_catalog_portal[ProActive Catalog.]
- _Project Name(s)_: You can also filter by one or more project names. You just have to specify the project names for the jobs you would like to analyze.
- _Job State(s)_: You can specify the state of jobs you are looking for. The possible job states are: `Pending`, `Running`, `Stalled`, `Paused`, `In_Error`, `Finished`, `Canceled`, `Failed`, and `Killed`. For more information about job states, check the documentation link:../user/ProActiveUserGuide.html#_states[here.] Multiple values are accepted as well.
- _User(s)_: This filter allows to either select only the jobs of the connected/current user or to specify a list of users that have executed the jobs. By default, the toggle filter is activated to select only the user jobs.
- _Submission Time_: From the dropdown list, users can select a submission time frame (e.g., yesterday, last week, this month, etc.), or choose custom dates.
- _Variables and results_: It is possible to choose whether to display or not the workflow variables and results. When deactivated, the charts related to variables and results evolution/correlation will not be displayed in the dashboard.

More advanced search options (_highlighted in advanced search hints_) could be used to provide filter values such as _wildcards_. For example, names that start with a specific string value are selected using `value*`. Other supported expressions are: `_\*value_` for _Ends with_, `*value*` for _Contains_, `!value` for _Not equals_, and `!\*value*` for _Not contains_.

Now you can hit the search button to request jobs from the scheduler database according to the provided filter values. The search bar at the top shows a summary of the active search filters.

[[_JA-search-png]]
image::JA-search.png[align=center]

=== Execution Metrics
As shown in the screenshot below, Job Analytics Portal provides a summary of the most important job execution metrics. For instance, the dashboard shows:

- A first panel that displays the number of total jobs that correspond to the search query. It also shows the ratio of successful jobs over the total number, and the number of jobs that are in progress and not yet finished. Please note that the number of in-progress jobs corresponds to the moment when the search query is executed and it is not automatically refreshed.
- A second summary panel that displays the number of jobs with issues. We distinguish two types of issues: jobs that are finished but have encountered issues during their execution and interrupted jobs that did not finish their execution and were stopped due to diverse causes, such as insufficient resources, manual interruption, etc. Interrupted jobs include four states: `In-Error`, `Failed`, `Canceled`, and `Killed`.
- The last metric gives an overview of the average duration of the selected jobs.

image::JA-metrics.png[align=center]

=== Job Charts

Job Analytics includes three types of charts:

- *Job duration chart:* This chart shows durations per job. The x-axis shows the job ID and the y-axis shows the job duration. Hovering over the lines will also display the same information as a tooltip (see screenshot below). Using the duration chart will eventually help the users to identify any abnormal performance behaviour among several workflow executions.
[[_JA-duration]]

image::JA-duration.png[align=center]
- *Job variables chart:* This chart is intended to show all variable values of selected jobs. It represents the evolution chart for all numeric-only variables of the selected jobs. The chart provides the ability to hide or show specific input variables by clicking on the variable name in the legend, as shown in the figure below.

- *Job results chart:* This chart is intended to show all result values of selected jobs. It represents the evolution chart for all numeric-only results of the selected jobs. The chart provides also the ability to hide or show specific results by clicking on the variable name in the legend, as shown in the figure below.

image::JA-chart.png[align=center]

All charts provide some advanced features such as "maximize" and "enlarge" to better visualize the results, and "move" to customize the dashboard layout (see top left side of charts). All of them provide the hovering feature as previously described and two types of charts to display: line and bar charts. Switching from one to the other can be activated through a toggle button located at the top right of the chart. Same for show/hide variables and results.


=== Job Execution Table


The last element of the Job Analytics dashboard shows a summary table that contains all job executions returned by the search query. It includes the job ID, status, duration, submission time, variables, results, etc.
The jobs table provides many features:

- _Filtering_: users can specify filter values for every column. For instance, the picture below applies a filter on the duration where we filter only jobs that last more than 30s. For string values, we can apply string-related filters such as _Contains_. For dates, a calendar is displayed to help users select the right date. Please note that variables and results types are not automatically detected. Therefore users can choose either the _Contains_ filter or the _Greater than_ and _Less than_ filters.
- _Sort, hide, pin left and right columns_: allows users to easily handle and display data with respect to their needs.
- _Export the job data to CSV format_: enables users to exploit and process job data using other analytics tools such as R, Matlab, BI tools, Machine Learning APIs, etc.
- _Clear and apply filters_: When filters are applied, the displayed data is updated. Therefore, we provide a button (see _apply filters to charts_ on the top left of the of the table screenshot) that allows to synchronize the charts with the filtered data in the table. Finally, it is possible to clear all filters. This will automatically deactivate the synchronization.
- _Link to scheduler jobs_: data in the job ID column is linked to the job executions in the scheduler. For example, if users want to access to the logs of a failing job, they can click on the corresponding job ID to be redirected to the job location in the Scheduling Portal.

We note also that clicking on the issue types and charts described in the previous sections filters the table to show the corresponding jobs.

NOTE: It is important to notice that the dashboard layout and search preferences are saved in the browser cache so that users can have access to their last dashboard and search settings.

image::JA-table.png[align=center]

include::../common-footer.adoc[]

